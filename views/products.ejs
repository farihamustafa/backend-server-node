<div class="content-wrapper">
    <div class="row">
     
      <div class="col-lg-12 grid-margin stretch-card">
        <div class="card">
          <div class="card-body">
            <h4 class="card-title">Product Record</h4>
           <button onclick="window.location.href='/product/create'" class="btn btn-primary">Add Product</button>
            </p>
            <div class="table-responsive pt-3">
              <table class="table table-bordered">
                <thead>
                  <tr>
                    <th> # </th>
                    <th> Name </th>
                    <th> Description </th>
                    <th> Price </th>
                    <th> Image </th>
                    <th> Action </th>
                  </tr>
                </thead>
                <tbody>


                    <% data.forEach((item,index) => { %>
                  <tr>
                    <td> <%= index+1 %> </td>
                    <td> <%= item.name %></td>
                    <td>
                        <%= item.description %>
                    </td>
                    <td>Rs <%= item.price %> </td>
                    <td> 
                        <img src="<%= item.url %>" height="100" width="100" />    
                    </td>
                    <td> 
                      <a href="/product/<%= item._id %>/edit" class="btn btn-secondary">Edit</a>
                        <button onclick="deleteProduct('<%= item._id %>')" class="btn btn-danger">Delete</button>
                    </td>
                  </tr>
                  <% }); %>



                 
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
     
    </div>
  </div>

  <script>
    function deleteProduct(id){
        fetch('/product/'+id, { method: 'DELETE' })
    .then(() => {alert("Deleted");location.reload();});

    }
  </script>